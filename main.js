(()=>{"use strict";var e="",t=document.querySelector(".page"),r=t.querySelector(".content"),o={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__btn-save",inactiveButtonClass:"form__btn-save_disabled",inputErrorClass:"form__input_error",textErrorClass:"form__error_active"},n=r.querySelector(".gallery__cards");const c=e+"77886a06249e4a121a34.jpeg";var a=[{name:"Санкт-Петербург",link:e+"4e6215314f548804fa4d.jpg"},{name:"Москва",link:e+"eed5789a80c734d8aa60.jpeg"},{name:"Казань",link:e+"a5de3061c157c0abbcf7.jpg"},{name:"Выборг",link:e+"cd68f687d5daf3d5b7bc.jpeg"},{name:"Псков",link:e+"60b3b1881bfb8d9d6b47.jpg"},{name:"Приозерск",link:e+"badfc13723396c54d37e.jpeg"}];function l(e){"Escape"===e.key&&p(t.querySelector(".popup_opened"))}function i(){p(t.querySelector(".popup_opened"),!0)}function u(e,t){e.classList.add("popup_opened"),document.addEventListener("keydown",l),e.callback=t;var r=e.querySelector(".popup__btn");null!==r&&r.addEventListener("click",i)}function p(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.classList.remove("popup_opened"),document.removeEventListener("keydown",l);var r=e.querySelector(".popup__btn");null!==r&&r.removeEventListener("click",i),void 0!==e.callback&&e.callback(t)}t.querySelectorAll(".popup").forEach((function(e){e.querySelector(".popup__btn-close").addEventListener("click",(function(){return p(e)})),e.addEventListener("mousedown",(function(t){t.target===e&&p(e)}))}));var d=document.querySelector("#card-item-template").content,s=t.querySelector(".popup_type_viewer-photo"),_=s.querySelector(".viewer__photo"),f=s.querySelector(".viewer__caption"),v=t.querySelector(".popup_type_confirm");function y(e){var t=d.querySelector(".card").cloneNode(!0),r=t.querySelector(".card__photo"),o=t.querySelector(".card__text"),n=t.querySelector(".card__like"),c=t.querySelector(".card__delete");return r.src=e.link,r.setAttribute("alt",e.name),o.textContent=e.name,r.addEventListener("click",(function(){_.src=e.link,_.setAttribute("alt",e.name),f.textContent=e.name,u(s)})),n.addEventListener("click",(function(){n.classList.toggle("card__like_active")})),c.addEventListener("click",(function(){u(v,(function(e){e&&t.remove()}))})),t}function m(e,t,r){e.classList.remove(r.inputErrorClass),t.classList.remove(r.textErrorClass),t.textContent=e.validationMessage}function S(e,t,r){t?(e.disabled=!1,e.classList.remove(r.inactiveButtonClass)):(e.disabled="disabled",e.classList.add(r.inactiveButtonClass))}function q(e,t){e.querySelectorAll(".form__input").forEach((function(r){m(r,e.querySelector(".".concat(r.id,"-error")),t)}))}a.forEach((function(e){var t=y(e);n.append(t)}));var b=t.querySelector(".popup_type_edit-profile"),E=r.querySelector(".profile__btn-edit"),k=b.querySelector(".form"),L=k.querySelector(".form__input_type_profile-name"),C=k.querySelector(".form__input_type_profile-description"),g=b.querySelector(".form__btn-save"),h=r.querySelector(".profile__title"),x=r.querySelector(".profile__subtitle"),A=t.querySelector(".popup_type_update-avatar"),j=r.querySelector(".profile__avatar-btn-add"),w=r.querySelector(".profile__avatar"),B=A.querySelector(".form"),D=A.querySelector(".form__input_type_avatar-url"),M=A.querySelector(".form__btn-save");function N(e){w.src=e}N(c);var V,z=t.querySelector(".popup_type_add-photo"),F=r.querySelector(".profile__btn-add"),G=z.querySelector(".form"),H=z.querySelector(".form__input_type_photo-name"),I=z.querySelector(".form__input_type_photo-url"),J=z.querySelector(".form__btn-save");E.addEventListener("click",(function(){L.value=h.textContent,C.value=x.textContent,q(k,o),S(g,!1,o),u(b)})),k.addEventListener("submit",(function(e){e.preventDefault();var t=L.value,r=C.value;h.textContent=t,x.textContent=r,p(b)})),j.addEventListener("click",(function(){B.reset(),q(B,o),S(M,!1,o),u(A)})),B.addEventListener("submit",(function(e){e.preventDefault(),N(D.value),p(A)})),F.addEventListener("click",(function(){G.reset(),q(G,o),S(J,!1,o),u(z)})),G.addEventListener("submit",(function(e){e.preventDefault();var t=y({name:H.value,link:I.value});n.prepend(t),p(z)})),V=o,Array.from(document.querySelectorAll(V.formSelector)).forEach((function(e){return function(e,t){var r=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButtonSelector);r.forEach((function(r){r.addEventListener("input",(function(){S(o,e.checkValidity(),t),function(e,t,r){var o=t.querySelector(".".concat(e.id,"-error"));e.validity.valid?m(e,o,r):function(e,t,r){e.classList.add(r.inputErrorClass),t.classList.add(r.textErrorClass),t.textContent=e.validationMessage}(e,o,r)}(r,e,t)}))}))}(e,V)}))})();